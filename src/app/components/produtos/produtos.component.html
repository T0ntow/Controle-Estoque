<div id="box-filters">
  <ion-searchbar color="secondary" placeholder="Pesquise por um produto"
    (ionChange)="searchProducts($event)"></ion-searchbar>
  <ion-button color="secondary" id="popover-filters"> Filtros </ion-button>

  <ion-button color="secondary">
    <ion-select color="secondary" [(ngModel)]="sortOrder" (ionChange)="sortProducts()">
      <ion-select-option value="asc">Crescente</ion-select-option>
      <ion-select-option value="desc">Decrescente</ion-select-option>
    </ion-select>
  </ion-button>

  <ion-popover trigger="popover-filters">
    <ng-template>
      <ion-content>

        <ion-item color="dark">
          <ion-select placeholder="Marcas" [(ngModel)]="selectedMark" (ionChange)="filterProducts('mark')">
            <ion-select-option *ngFor="let marca of marcas" [value]="marca">{{ marca }}</ion-select-option>
          </ion-select>
        </ion-item>

        <ion-item color="dark">
          <ion-label>Data:</ion-label>

          <ion-input label="Data" type="date" labelPlacement="floating" placeholder="Data"
            (ionChange)="filterProducts('date')"></ion-input>
        </ion-item>

        <ion-item color="danger" button (click)="removeFilters()">Remover Filtros</ion-item>

      </ion-content>
    </ng-template>
  </ion-popover>

</div>

<ng-container>
  <ion-card>
    <ion-grid class="table-container">
        <ion-row class="table-row">
          <ion-col class="table-col table-header">Codigo</ion-col>
          <ion-col class="table-col table-header">Produto</ion-col>
          <ion-col class="table-col table-header">Marca</ion-col>
          <ion-col class="table-col table-header">Data</ion-col>
          <ion-col class="table-col table-header">Estoque</ion-col>
          <ion-col class="table-col table-header">Entrada</ion-col>
          <ion-col class="table-col table-header">Saida</ion-col>
        </ion-row>
        <ion-row class="table-row" *ngFor="let product of filteredProducts">
          <ion-col class="table-col">{{ product.Codigo }}</ion-col>
          <ion-col class="table-col">{{ product.Produto }}</ion-col>
          <ion-col class="table-col">{{ product.Marca }}</ion-col>
          <ion-col class="table-col">{{ product.Data }}</ion-col>
          <ion-col class="table-col">{{ product.Estoque }}</ion-col>
          <ion-col class="table-col">{{ product.Entrada }}</ion-col>
          <ion-col class="table-col">{{ product.Saida }}</ion-col>
          <ion-col class="table-col ion-padding" id="edit-product" (click)="openPopoverEdit($event, product)">
            <ion-icon name="create-outline"></ion-icon>
          </ion-col>
          
        </ion-row>

    </ion-grid>
  </ion-card>

</ng-container>

<ion-card *ngIf="errorGetProducts == true; " color="secondary">
  <ion-title>Falha ao recuperar itens</ion-title>
</ion-card>

<ng-template #semProdutos>
  <ion-card color="secondary">
    <ion-title>Sem produtos</ion-title>
  </ion-card>
</ng-template>